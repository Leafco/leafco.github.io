[{"content":"测试页面 package com.bsc.dicom.cloud.service.impl;  import cn.hutool.core.util.ObjectUtil; import com.baomidou.mybatisplus.mapper.EntityWrapper; import com.baomidou.mybatisplus.service.impl.ServiceImpl; import com.bsc.dicom.cloud.common.ExaminationStatus; import com.bsc.dicom.cloud.common.PermissionEnum; import com.bsc.dicom.cloud.entity.CloudExamination; import com.bsc.dicom.cloud.mapper.CloudUserPermissionMapper; import com.bsc.dicom.cloud.model.CloudUserPermission; import com.bsc.dicom.cloud.model.UserPermissionModel; import com.bsc.dicom.cloud.service.ICloudExaminationService; import com.bsc.dicom.cloud.service.ICloudUserPermissionService; import com.bsc.dicom.common.HttpCode; import com.bsc.dicom.common.dto.ResultDTO; import com.bsc.dicom.common.util.WebUtil; import com.bsc.dicom.system.entity.UUser; import lombok.RequiredArgsConstructor; import org.springframework.stereotype.Service;  import java.util.HashMap; import java.util.List; import java.util.Map;  /** * \u0026lt;p\u0026gt; * 服务实现类 * \u0026lt;/p\u0026gt; * * @author Suo * @since 2021-06-04 */ @Service @RequiredArgsConstructor public class CloudUserPermissionService extends ServiceImpl\u0026lt;CloudUserPermissionMapper, CloudUserPermission\u0026gt; implements ICloudUserPermissionService {   private final ICloudExaminationService examinationService;   private static final String REPORT_MAP_KEY = \u0026#34;report\u0026#34;;   private static final String REVIEW_MAP_KEY = \u0026#34;review\u0026#34;;   @Override  public List\u0026lt;UserPermissionModel\u0026gt; fingPage(Map\u0026lt;String, String\u0026gt; conditions) {  return baseMapper.fingPage(conditions);  }   @Override  public int getPageTotal(Map\u0026lt;String, String\u0026gt; conditions) {  return baseMapper.getPageTotal(conditions);  }   /** * 获取当前登录用户所有权限编码 * * @param examId 检查信息id * @return 权限编码 */  @Override  public ResultDTO\u0026lt;Map\u0026lt;String, Object\u0026gt;\u0026gt; permission(String examId) {   ResultDTO\u0026lt;Map\u0026lt;String, Object\u0026gt;\u0026gt; resultDTO = ResultDTO.newInstance();   boolean report = false;  boolean review = false;   Map\u0026lt;String, Object\u0026gt; resultMap = new HashMap\u0026lt;\u0026gt;(2);   CloudExamination cloudExamination = examinationService.selectById(examId);   if (ObjectUtil.isNull(cloudExamination)) {   return resultDTO.setResultCode(HttpCode.BAD_REQUEST);  }   String rcvSiteId = cloudExamination.getRcvSiteId();   boolean isLocal = cloudExamination.getSndSiteId().equals(rcvSiteId);  Integer status = cloudExamination.getStatus();   UUser user = WebUtil.getCurrentUser();  assert user != null;   String userId = user.getUserid();  String siteId = user.getSiteid();   EntityWrapper\u0026lt;CloudUserPermission\u0026gt; wrapper = new EntityWrapper\u0026lt;\u0026gt;();  wrapper.eq(\u0026#34;user_id\u0026#34;, userId);   List\u0026lt;CloudUserPermission\u0026gt; cloudUserPermissions = selectList(wrapper);   for (CloudUserPermission permission : cloudUserPermissions) {   String permCode = permission.getPermCode();   // 当前登录用户医院id为接收医院id才能写/审核报告  if (siteId.equals(rcvSiteId)) {   if (isLocal) {  // 本院  if (PermissionEnum.LOCALREPORT.getPermissionCode().equals(permCode)  \u0026amp;\u0026amp; ExaminationStatus.APPLIED.getCode().equals(status)) {   report = true;  }  if (PermissionEnum.LOCALREVIEW.getPermissionCode().equals(permCode)  \u0026amp;\u0026amp; ExaminationStatus.REPORTED.getCode().equals(status)) {   review = true;  }  } else {   // 远程  if (PermissionEnum.REMOTEREPORT.getPermissionCode().equals(permCode)  \u0026amp;\u0026amp; ExaminationStatus.APPLIED.getCode().equals(status)) {   report = true;  }  if (PermissionEnum.REMOTEREVIEW.getPermissionCode().equals(permCode)  \u0026amp;\u0026amp; ExaminationStatus.REPORTED.getCode().equals(status)) {   review = true;  }  }  }  }   resultMap.put(REPORT_MAP_KEY, report);  resultMap.put(REVIEW_MAP_KEY, review);   return resultDTO.setData(resultMap);  } } ","permalink":"https://leafco.github.io/posts/%E6%B5%8B%E8%AF%95%E9%A1%B5%E9%9D%A201/","summary":"测试页面 package com.bsc.dicom.cloud.service.impl;  import cn.hutool.core.util.ObjectUtil; import com.baomidou.mybatisplus.mapper.EntityWrapper; import com.baomidou.mybatisplus.service.impl.ServiceImpl; import com.bsc.dicom.cloud.common.ExaminationStatus; import com.bsc.dicom.cloud.common.PermissionEnum; import com.bsc.dicom.cloud.entity.CloudExamination; import com.bsc.dicom.cloud.mapper.CloudUserPermissionMapper; import com.bsc.dicom.cloud.model.CloudUserPermission; import com.bsc.dicom.cloud.model.UserPermissionModel; import com.bsc.dicom.cloud.service.ICloudExaminationService; import com.bsc.dicom.cloud.service.ICloudUserPermissionService; import com.bsc.dicom.common.HttpCode; import com.bsc.dicom.common.dto.ResultDTO; import com.bsc.dicom.common.util.WebUtil; import com.bsc.dicom.system.entity.UUser; import lombok.RequiredArgsConstructor; import org.springframework.stereotype.Service;  import java.util.HashMap; import java.util.List; import java.util.Map;  /** * \u0026lt;p\u0026gt; * 服务实现类 * \u0026lt;/p\u0026gt; * * @author Suo * @since 2021-06-04 */ @Service @RequiredArgsConstructor public class CloudUserPermissionService extends ServiceImpl\u0026lt;CloudUserPermissionMapper, CloudUserPermission\u0026gt; implements ICloudUserPermissionService {   private final ICloudExaminationService examinationService;   private static final String REPORT_MAP_KEY = \u0026#34;report\u0026#34;;   private static final String REVIEW_MAP_KEY = \u0026#34;review\u0026#34;;   @Override  public List\u0026lt;UserPermissionModel\u0026gt; fingPage(Map\u0026lt;String, String\u0026gt; conditions) {  return baseMapper.","title":"测试页面01"},{"content":"测试页面 java -jar xxx.jar ","permalink":"https://leafco.github.io/posts/%E6%B5%8B%E8%AF%95%E9%A1%B5%E9%9D%A2/","summary":"测试页面 java -jar xxx.jar ","title":"测试页面"}]